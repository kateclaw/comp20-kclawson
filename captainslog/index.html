<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8" />
    <title>Captain's Log</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            loadData;

            function loadData() {
                $('#log').html(localStorage.message);
            }

            var messages = [];
            var i = 0;

            $(window).keypress(function (e) {
                // if enter
                if (e.which == 13) {

                // THIS WORKS
                    // $('#msg').each(function () {
                    //     var message = $('#msg').val();
                    //     localStorage.message = message;
                    //     messages.push(localStorage.message);

                    //     console.log("local storage:" + localStorage.message);
                    //     console.log(" messages array:" + messages[i]);
                    // })
                /////


                    // // // for (i = 0; i < messages.length; i++) {
                    // // //    $('#log').html(messages[i]);
                    // // //     console.log("after: " + messages[i]);
                    // // // }
                

                    $('#msg').each(function () {
                        var message = $('#msg').val();
                        // localStorage.message = message;
                        messages.push(message);
                        messages.push("<br>");


                        localStorage.setItem("messages", JSON.stringify(messages));                        
                    })

                    var storedMessages = JSON.parse(localStorage.getItem("messages"));

                    storedMessages.reverse();

                    console.log(storedMessages);
                    $('#log').html(storedMessages);
                    
                // THIS WORKS
                    // messages.forEach(function (k) {
                    //     $('#log').html(k)
                    //     console.log(k);
                    // })
                /////

                    // var map = {};
                    // $("#msg").each(function () {
                    //     map[$(this).val()] = $(this).val();
                    // });

                    // alert(map); 

                    // var inputValues = $('#msg').map(function () {
                    //     return $(this).val();
                    // });

                    // $('#log').append(inputValues)

                }

            })
      

        });



        // $(document).ready(function () {
        //         $(window).unload(saveSettings);
        //         loadSettings();
        //     });

        //     function loadSettings() {
        //         $('#msg').val(localStorage.message);
        //     }

        //     function saveSettings() {
        //         localStorage.message = $('#msg').val();

        //     }

        // // $('#msg').val(localStorage.msg);
        // // var msg = document.getElementById("msg").value;
        // // localStorage.msg = msg;

        // $(document).keypress(function (e) {
        //         // if enter
        //         if (e.which == 13) {
        //             $('#log').html(message)
        //         }
        //     })
    </script>
</head>

<body>
    <h1>Captain's Log</h1>
    <h3>New entry: <input type="text" id="msg" name="msg" size="30" /></h3>
    <div id="log"></div>
</body>

</html>